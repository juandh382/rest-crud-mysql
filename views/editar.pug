extends main
block content
    section.row.justify-content-center
        form.col-xl-8.col-lg-8.col-md-8.col-sm-12.col-12(method="PUT", enctype="multipart/form-data")
            .form-group.mb-3 
                label(for="titulo") Titulo
                input(required, value=`${titulo}`, type="text", name="titulo", id="titulo", class="form-control")
            .form-group.mb-3 
                label(for="estreno") Estreno
                input(required, value=`${estreno}`, type="date", name="estreno", id="estreno", class="form-control")
            .row.mb-3 
                .col-xl-4.col-lg-4.col-md-4.col-sm-12.col-12 
                    label(for="taquilla") Taquilla
                    input(required, value=`${taquilla}`, type="number", name="taquilla", id="taquilla", class="form-control")
                .col-xl-4.col-lg-4.col-md-4.col-sm-12.col-12 
                    label(for="entradas") Entradas
                    input(required, value=`${entradas}`, type="number", name="entradas", id="entradas", class="form-control")
                .col-xl-4.col-lg-4.col-md-4.col-sm-12.col-12 
                    label(for="top") top
                    input(required, value=`${top}`, type="number", name="top", id="top", class="form-control")
                input(required, value=`${id}`, type="hidden", name="id", id="top", class="form-control")
            button(type="submit", class="btn btn-lg btn-primary") Guardar 
    script(src='//cdn.jsdelivr.net/npm/sweetalert2@11')
    script.
        const form = document.querySelector('form');
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const 
                data = new FormData(form),
                xhr = new XMLHttpRequest();

            xhr.addEventListener('load', function() {
                const { status, msg } = JSON.parse(xhr.response);


                if (status === 'ok') {
                    Swal.fire(
                      'Pelicula Guardada!',
                       msg,
                      'success'
                    )
                } else {
                    console.log(msg);
                }
            })

            xhr.open('PUT', '/editar');
            // xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');
            xhr.send(data);

        })